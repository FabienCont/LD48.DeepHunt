(self.webpackChunk=self.webpackChunk||[]).push([[273],{273:(t,e,a)=>{"use strict";a.r(e),a.d(e,{renderImages:()=>s});var i=function(t){return this.$variables.cache&&this.$variables.cache.dicoPattern&&this.$variables.cache.dicoPattern[t]?this.$variables.cache.dicoPattern[t]:null},n=function(t,e,a,n,s,h,c,r,o,l,d,g,v,f){var w;(w=i.call(this,t)||function(t,e,a,i,n,s,h,c){var r={canvas:document.createElement("canvas")};r.canvas.width=h*e*1,r.canvas.height=c*e*1,r.canvas.setAttribute("height",1*r.canvas.height),r.canvas.setAttribute("width",1*r.canvas.width),r.canvas.style.height="100%",r.canvas.style.width="100%",r.canvas.style.imageRendering="-moz-crisp-edges",r.canvas.style.imageRendering="-webkit-crisp-edges",r.canvas.style.imageRendering="crisp-edges",r.canvas.style.imageRendering="pixelated",r.context=r.canvas.getContext("2d"),r.context.imageSmoothingEnabled=!1,r.context.setTransform(1,0,0,1,0,0);var o=h*e,l=c*e;return r.canvas.width>0&&r.canvas.height>0?(r.context.drawImage(t,n,s,h,c,0,0,o,l),r.context.createPattern(r.canvas,"repeat")):null}(a,n,0,0,c,r,o,l))&&(e.fillStyle=w,e.translate(-v/2,-f/2),e.translate(-Math.abs(s.left),-Math.abs(s.top)),e.translate(h.x,h.y),e.fillRect(-h.x+Math.abs(s.left),-h.y+Math.abs(s.top),v,f),e.fillStyle="#000000")},s=function(){var t=this,e=this.context;Object.values(this.$cameras).forEach((function(a){var i=a.getDico().images;if(i){if(i=i.sort((function(t,e){return t.destination.z-e.destination.z})),0===a.screen.opacity)return;i.forEach((function(i){var s=i.shift,h=i.destination,c=i.frame,r=i.opacity,o=i.source,l=i.rotate,d=i.spriteName,g=a.visible(h.x*a.screen.scale(),h.y*a.screen.scale(),h.width*a.screen.scale(),h.height*a.screen.scale()),v=r*a.screen.opacity;if(v>0&&!0===g){var f=e.globalAlpha;e.globalAlpha=v;a.screen.width();var w=(a.screen.width(),a.screen.height(),a.position.z(),{destination:{x:a.screen.x()+h.x*a.screen.scale()-(a.position.x()*a.screen.scale()-a.screen.width()/2),y:a.screen.y()+h.y*a.screen.scale()-(a.position.y()*a.screen.scale()-a.screen.height()/2),width:h.width*a.screen.scale(),height:h.height*a.screen.scale()}}),y={top:Math.min(0,w.destination.y-a.screen.y()),right:Math.max(0,w.destination.x+w.destination.width-(a.screen.x()+a.screen.width())),bottom:Math.max(0,w.destination.y+w.destination.height-(a.screen.y()+a.screen.height())),left:Math.min(0,w.destination.x-a.screen.x())},b=w.destination.x-y.left,m=w.destination.y-y.top,x=w.destination.width-y.right-Math.abs(y.left),p=w.destination.height-y.bottom-Math.abs(y.top);e.setTransform(1,0,0,1,0,0),e.translate(b+x/2,m+p/2),e.rotate(l.z*Math.PI/180),e.scale(1,Math.cos(l.x*Math.PI/180)),e.scale(Math.cos(l.y*Math.PI/180),1),h.width===c.width&&h.height===c.height&&0===s.x&&0===s.y?e.drawImage(o,c.x-y.left*(c.width/w.destination.width),c.y-y.top*(c.height/w.destination.height),c.width-y.right*(c.width/w.destination.width)-Math.abs(y.left*(c.width/w.destination.width)),c.height-y.bottom*(c.height/w.destination.height)-Math.abs(y.top*(c.height/w.destination.height)),-x/2,-p/2,x,p):n.call(t,d,e,o,a.screen.scale(),y,s,c.x,c.y,c.width,c.height,-x/2,-p/2,x,p),e.globalAlpha=f}}))}})),e.setTransform(1,0,0,1,0,0)}}}]);
//# sourceMappingURL=273_bundle.js.map