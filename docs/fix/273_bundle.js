(self.webpackChunk=self.webpackChunk||[]).push([[273],{273:(t,e,a)=>{"use strict";a.r(e),a.d(e,{renderImages:()=>c});var i=function(t){return this.$variables.cache&&this.$variables.cache.dicoPattern&&this.$variables.cache.dicoPattern[t]?this.$variables.cache.dicoPattern[t]:null},n=function(t,e){this.$variables.cache&&(this.$variables.cache.dicoPattern||(this.$variables.cache.dicoPattern={}),this.$variables.cache.dicoPattern[t]=e)},s=function(t,e,a,s,c,h,r,o,l,d,g,v,b,f,x){var p=null,w=i.call(this,t);w?p=w:(p=function(t,e,a,i,n,s,c,h,r){var o={canvas:document.createElement("canvas")};o.canvas.setAttribute("height",r*a),o.canvas.setAttribute("width",h*a),o.canvas.style.width="".concat(h*a,"+px"),o.canvas.style.height="".concat(r*a,"+px"),o.canvas.style.imageRendering="-moz-crisp-edges",o.canvas.style.imageRendering="-webkit-crisp-edges",o.canvas.style.imageRendering="crisp-edges",o.canvas.style.imageRendering="pixelated",o.context=o.canvas.getContext("2d"),o.context.imageSmoothingEnabled=!1,o.context.setTransform(1,0,0,1,0,0);var l=h*a,d=r*a;return o.canvas.width>0&&o.canvas.height>0?(o.context.drawImage(t,s,c,h,r,0,0,l,d),o.context.createPattern(o.canvas,"repeat")):null}(s,0,c,0,0,o,l,d,g))&&n.call(this,t,p),p&&(e.fillStyle=p,e.translate(-f/2,-x/2),e.translate(-Math.abs(h.left),-Math.abs(h.top)),e.translate(r.x,r.y),e.fillRect(-r.x+Math.abs(h.left),-r.y+Math.abs(h.top),f,x),e.fillStyle="#000000")},c=function(){var t=this,e=this.canvas.ratio,a=this.context;Object.values(this.$cameras).forEach((function(i){var n=i.getDico().images;if(n){if(n=n.sort((function(t,e){return t.destination.z-e.destination.z})),0===i.screen.opacity)return;n.forEach((function(n){var c=n.shift,h=n.destination,r=n.frame,o=n.opacity,l=n.source,d=n.rotate,g=n.spriteName,v=i.visible(h.x*i.screen.scale(),h.y*i.screen.scale(),h.width*i.screen.scale(),h.height*i.screen.scale()),b=o*i.screen.opacity;if(b>0&&!0===v){var f=a.globalAlpha;a.globalAlpha=b;i.screen.width();var x=(i.screen.width(),i.screen.height(),i.position.z(),{destination:{x:i.screen.x()+h.x*i.screen.scale()-(i.position.x()*i.screen.scale()-i.screen.width()/2),y:i.screen.y()+h.y*i.screen.scale()-(i.position.y()*i.screen.scale()-i.screen.height()/2),width:h.width*i.screen.scale(),height:h.height*i.screen.scale()}}),p={top:Math.min(0,x.destination.y-i.screen.y()),right:Math.max(0,x.destination.x+x.destination.width-(i.screen.x()+i.screen.width())),bottom:Math.max(0,x.destination.y+x.destination.height-(i.screen.y()+i.screen.height())),left:Math.min(0,x.destination.x-i.screen.x())},w=x.destination.x-p.left,y=x.destination.y-p.top,m=x.destination.width-p.right-Math.abs(p.left),u=x.destination.height-p.bottom-Math.abs(p.top);a.setTransform(e,0,0,e,0,0),a.translate(w+m/2,y+u/2),a.rotate(d.z*Math.PI/180),a.scale(1,Math.cos(d.x*Math.PI/180)),a.scale(Math.cos(d.y*Math.PI/180),1),h.width===r.width&&h.height===r.height&&0===c.x&&0===c.y?a.drawImage(l,r.x-p.left*(r.width/x.destination.width),r.y-p.top*(r.height/x.destination.height),r.width-p.right*(r.width/x.destination.width)-Math.abs(p.left*(r.width/x.destination.width)),r.height-p.bottom*(r.height/x.destination.height)-Math.abs(p.top*(r.height/x.destination.height)),-m/2,-u/2,m,u):s.call(t,g,a,e,l,i.screen.scale(),p,c,r.x,r.y,r.width,r.height,-m/2,-u/2,m,u),a.globalAlpha=f}}))}})),a.setTransform(e,0,0,e,0,0)}}}]);
//# sourceMappingURL=273_bundle.js.map