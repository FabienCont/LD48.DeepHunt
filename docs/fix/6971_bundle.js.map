{"version":3,"sources":["webpack:///./sources/game/scripts/systems/common/sounds.js"],"names":["sounds","entities","Object","entries","forEach","entity","get","parts","key","soundInfo","scope","name","isPlayed","audio","assets","sound","audioApi","play","node","addEventListener","disconnect","console","log"],"mappings":"sgCAAA,SAASA,EAAOC,GAAU,WACxBC,OAAOC,QAAQF,GAAUG,SAAQ,YAAoB,aAAZC,GAAY,WAC7CL,EAASK,EAAOC,IAAI,UAC1BJ,OAAOC,QAAQH,EAAOO,OAAOH,SAAQ,YAAsB,aAApBI,EAAoB,KAAfC,EAAe,KACjDC,EAA0BD,EAA1BC,MAAOC,EAAmBF,EAAnBE,KACf,IADkCF,EAAbG,SACN,CACb,IAAMC,EAAQ,EAAKC,OAAOd,OAAOU,GAAOC,KAClCI,EAAQ,EAAKC,SAASC,KAAKJ,GAAO,EAAO,IAC/CJ,EAAUG,UAAW,EACrBH,EAAUS,KAAOH,EACjBA,EAAMI,iBAAiB,SAAS,WAE9B,GADIV,GAAaA,EAAUS,MAAMT,EAAUS,KAAKE,aAC5Cf,EAAQ,CACV,IAAML,EAASK,EAAOC,IAAI,UACtBN,GAAUA,EAAOO,OAASP,EAAOO,MAAMC,WAClCR,EAAOO,MAAMC,GAGxBa,QAAQC,IAAI,mB","file":"6971_bundle.js","sourcesContent":["function sounds(entities) {\n  Object.entries(entities).forEach(([name, entity]) => {\n    const sounds = entity.get('sounds');\n    Object.entries(sounds.parts).forEach(([key, soundInfo]) => {\n      const { scope, name, isPlayed } = soundInfo;\n      if (!isPlayed) {\n        const audio = this.assets.sounds[scope][name]();\n        const sound = this.audioApi.play(audio, false, 0.3);\n        soundInfo.isPlayed = true;\n        soundInfo.node = sound;\n        sound.addEventListener('ended', () => {\n          if (soundInfo && soundInfo.node) soundInfo.node.disconnect();\n          if (entity) {\n            const sounds = entity.get('sounds');\n            if (sounds && sounds.parts && sounds.parts[key]) {\n              delete sounds.parts[key];\n            }\n          }\n          console.log('ended');\n        });\n      }\n    });\n  });\n}\nexport { sounds };\n"],"sourceRoot":""}