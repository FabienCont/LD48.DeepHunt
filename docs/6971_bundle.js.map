{"version":3,"sources":["webpack:///./sources/game/scripts/systems/common/sounds.js"],"names":["sounds","entities","Object","entries","forEach","entity","get","parts","key","sound","scope","name","isPlayed","audio","assets","readyState","currentTime","node","cloneNode","addEventListener","remove","volume","play"],"mappings":"sgCAAA,SAASA,EAAOC,GAAU,WAExBC,OAAOC,QAAQF,GAAUG,SAAQ,YAAoB,aAAZC,GAAY,WAC/CL,EAASK,EAAOC,IAAI,UACxBJ,OAAOC,QAAQH,EAAOO,OAAOH,SAAQ,YAAkB,aAAhBI,EAAgB,KAAXC,EAAW,KAC9CC,EAA0BD,EAA1BC,MAAOC,EAAmBF,EAAnBE,KACd,IADiCF,EAAZG,SACN,CAEb,IAAIC,EAAQ,EAAKC,OAAOd,OAAOU,GAAOC,KAClCE,EAAME,WAAa,GAA2B,IAAtBF,EAAMG,cAChCP,EAAMQ,KAAKJ,EAAMK,YACjBT,EAAMQ,KAAKE,iBAAiB,SAAS,WAEnC,GADGV,GAASA,EAAMQ,MAAMR,EAAMQ,KAAKG,SAC/Bf,EAAO,CACP,IAAIL,EAASK,EAAOC,IAAI,UACpBN,GAAUA,EAAOO,OAASP,EAAOO,MAAMC,WAClCR,EAAOO,MAAMC,OAI5BC,EAAMQ,KAAKI,OAAS,GACpBZ,EAAMQ,KAAKK,OACXb,EAAMG,UAAU,U","file":"6971_bundle.js","sourcesContent":["function sounds(entities) {\n\n  Object.entries(entities).forEach(([name, entity]) => {\n    let sounds = entity.get('sounds');\n    Object.entries(sounds.parts).forEach(([key, sound]) => {\n      const {scope, name , isPlayed } =sound;\n      if( !isPlayed ){\n\n        let audio = this.assets.sounds[scope][name]();\n        if (audio.readyState > 2 && audio.currentTime === 0) {\n          sound.node=audio.cloneNode();\n          sound.node.addEventListener(\"ended\", function() {\n            if(sound && sound.node) sound.node.remove()\n            if( entity){\n                let sounds = entity.get('sounds')\n                if( sounds && sounds.parts && sounds.parts[key] ){\n                  delete sounds.parts[key];\n                }\n            }\n          });\n          sound.node.volume = 0.3;\n          sound.node.play();\n          sound.isPlayed =true;\n        }\n      }\n    });\n  });\n\n  }\nexport { sounds };\n"],"sourceRoot":""}